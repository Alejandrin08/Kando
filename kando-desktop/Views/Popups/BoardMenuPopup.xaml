<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:local="clr-namespace:kando_desktop"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               xmlns:strings="clr-namespace:kando_desktop.Resources.Strings"
               x:Class="kando_desktop.Views.Popups.BoardMenuPopup"
               Color="Transparent"
               CanBeDismissedByTappingOutsideOfPopup="True">
    
    <Border StrokeShape="RoundRectangle 12"
            StrokeThickness="1"
            BackgroundColor="{AppThemeBinding Light={StaticResource MenuBgLight}, Dark={StaticResource MenuBgDark}}"
            Stroke="{AppThemeBinding Light={StaticResource Slate200}, Dark={StaticResource MenuBorderDark}}"
            Padding="4"
            Margin="0"
            WidthRequest="180" 
            HeightRequest="80"
            TranslationY="120"
            TranslationX="-80"
            HorizontalOptions="Start">

        <Border.Shadow>
            <Shadow Brush="Black" Offset="0,2" Radius="8" Opacity="0.1"/>
        </Border.Shadow>

        <VerticalStackLayout Spacing="2">

            <Border Style="{StaticResource MenuItemBorderStyle}" x:Name="EditBtn" local:CursorBehavior.Cursor="Hand">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding EditBoardCommand}"/>
                </Border.GestureRecognizers>

                <Grid ColumnDefinitions="24, *">
                    <Image Source="{AppThemeBinding Light=pencil_black.png, Dark=pencil_white.png}"
                           HeightRequest="16" WidthRequest="16"
                           HorizontalOptions="Center" VerticalOptions="Center">
                        <Image.Triggers>
                            <DataTrigger TargetType="Image" Binding="{Binding Source={x:Reference EditBtn}, Path=BackgroundColor}" Value="#0b64f4">
                                <Setter Property="Source" Value="pencil_white.png"/>
                            </DataTrigger>
                            <DataTrigger TargetType="Image" Binding="{Binding Source={x:Reference EditBtn}, Path=BackgroundColor}" Value="#3c83f6">
                                <Setter Property="Source" Value="pencil_black.png"/>
                            </DataTrigger>
                        </Image.Triggers>
                    </Image>

                    <Label Grid.Column="1" 
                           Text="{x:Static strings:AppResources.ModifyBoard}" 
                           Style="{StaticResource MenuItemLabelStyle}">
                        <Label.Triggers>
                            <DataTrigger TargetType="Label" Binding="{Binding Source={x:Reference EditBtn}, Path=BackgroundColor}" Value="#0b64f4">
                                <Setter Property="TextColor" Value="White"/>
                            </DataTrigger>
                            <DataTrigger TargetType="Label" Binding="{Binding Source={x:Reference EditBtn}, Path=BackgroundColor}" Value="#3c83f6">
                                <Setter Property="TextColor" Value="Black"/>
                            </DataTrigger>
                        </Label.Triggers>
                    </Label>
                </Grid>
            </Border>

            <BoxView HeightRequest="1" 
                     Margin="4,1" 
                     Color="{AppThemeBinding Light={StaticResource MenuSeparatorLight}, Dark={StaticResource MenuSeparatorDark}}"/>

            <Border Style="{StaticResource MenuItemBorderStyle}" x:Name="DeleteBtn" local:CursorBehavior.Cursor="Hand">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding DeleteBoardCommand}"/>
                </Border.GestureRecognizers>

                <Grid ColumnDefinitions="24, *">
                    <Image Source="trash.png"
                           HeightRequest="16" WidthRequest="16"
                           HorizontalOptions="Center" VerticalOptions="Center">
                        <Image.Triggers>
                            <DataTrigger TargetType="Image" Binding="{Binding Source={x:Reference DeleteBtn}, Path=BackgroundColor}" Value="#0b64f4">
                                <Setter Property="Source" Value="trash_white.png"/>
                            </DataTrigger>
                            <DataTrigger TargetType="Image" Binding="{Binding Source={x:Reference DeleteBtn}, Path=BackgroundColor}" Value="#3c83f6">
                                <Setter Property="Source" Value="trash_black.png"/>
                            </DataTrigger>
                        </Image.Triggers>
                    </Image>

                    <Label Grid.Column="1" 
                           Text="{x:Static strings:AppResources.DeleteBoard}"
                           Style="{StaticResource MenuItemDangerLabelStyle}">
                        <Label.Triggers>
                            <DataTrigger TargetType="Label" Binding="{Binding Source={x:Reference DeleteBtn}, Path=BackgroundColor}" Value="#0b64f4">
                                <Setter Property="TextColor" Value="White"/>
                            </DataTrigger>
                            <DataTrigger TargetType="Label" Binding="{Binding Source={x:Reference DeleteBtn}, Path=BackgroundColor}" Value="#3c83f6">
                                <Setter Property="TextColor" Value="Black"/>
                            </DataTrigger>
                        </Label.Triggers>
                    </Label>
                </Grid>
            </Border>

        </VerticalStackLayout>
    </Border>
</toolkit:Popup>